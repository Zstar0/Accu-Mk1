@import 'tailwindcss';
@import 'tw-animate-css';
@import './theme-variables.css';

@custom-variant dark (&:is(.dark *));

/* Fix autofill text color in dark mode — outside @layer for higher specificity */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
  -webkit-text-fill-color: hsl(var(--foreground)) !important;
  -webkit-box-shadow: 0 0 0px 1000px hsl(var(--input)) inset !important;
  box-shadow: 0 0 0px 1000px hsl(var(--input)) inset !important;
  transition: background-color 5000s ease-in-out 0s;
  caret-color: hsl(var(--foreground));
}

@layer base {
  * {
    @apply border-border outline-ring/50;
    box-sizing: border-box;
    cursor: default;
  }

  body {
    @apply text-foreground;
    font-family: -apple-system, 'Segoe UI', 'Roboto', sans-serif;
    font-size: 16px;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overscroll-behavior: none;
    min-height: 100vh;
    min-width: 100vw;
    overflow: hidden;
    position: relative;
  }

  svg {
    color: inherit;
  }

  /* Allow text selection in specific areas */
  input,
  textarea,
  [contenteditable='true'] {
    user-select: text !important;
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    -ms-user-select: text !important;
    cursor: text !important;
  }

  /* Utility class for when pointer cursor is explicitly needed */
  .cursor-pointer {
    cursor: pointer !important;
  }

  /* Required for drag regions to work with touch/pen on Windows */
  *[data-tauri-drag-region] {
    -webkit-app-region: drag;
    app-region: drag;
  }
}

/* Theme toggle — circular wipe using View Transition API */
@media (prefers-reduced-motion: no-preference) {
  ::view-transition-old(root) {
    animation: none;
  }
  ::view-transition-new(root) {
    animation: theme-circle-expand 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  @keyframes theme-circle-expand {
    from { clip-path: circle(0% at var(--theme-x, 50%) var(--theme-y, 50%)); }
    to   { clip-path: circle(150% at var(--theme-x, 50%) var(--theme-y, 50%)); }
  }
}
