---
phase: 02-data-pipeline
plan: 02-03
title: Manual File Selection UI
wave: 2
status: pending
requirements: [IMPORT-01, IMPORT-02]
depends_on: [02-01, 02-02]
created: 2026-01-16
---

## Goal

Build the frontend UI for manually selecting HPLC export files, previewing parsed data, and initiating batch imports. This provides the user-facing import workflow.

## Context

Plans 02-01 (Settings) and 02-02 (Import Backend) provide the APIs. This plan builds the React components that let users browse for files, see a preview of parsed data, and confirm the import. Initially uses browser file input; Tauri file dialog integration can be added later.

## Tasks

### Task 1: File Selection Component

**Files to create:**
- `src/components/FileSelector.tsx` - File picker component

**Implementation:**

1. Create FileSelector with:
   - File input accepting .txt files (multiple selection)
   - List of selected files with remove option
   - "Preview" button to parse selected files
   - "Import" button to start batch import

2. Use shadcn/ui: Button, Card, Badge for file chips

3. State management:
```typescript
const [selectedFiles, setSelectedFiles] = useState<File[]>([])
const [previews, setPreviews] = useState<ParsePreview[]>([])
const [importing, setImporting] = useState(false)
```

### Task 2: Preview Table Component

**Files to create:**
- `src/components/PreviewTable.tsx` - Data preview table

**Implementation:**

1. Create PreviewTable that displays:
   - Filename header
   - Column headers from parsed data
   - First 10 rows of data
   - Row count badge
   - Error messages if any

2. Use shadcn/ui: Table, TableHeader, TableRow, TableCell

3. Props interface:
```typescript
interface PreviewTableProps {
  preview: ParsePreview
  onRemove?: () => void
}
```

### Task 3: Import Workflow Integration

**Files to modify:**
- `src/components/MainWindow.tsx` - Add import section

**Implementation:**

1. Add Import section/tab to MainWindow:
   - FileSelector component
   - List of PreviewTable components for each previewed file
   - Import status/progress indicator
   - Success/error toast notifications

2. Wire up the workflow:
   - User selects files → calls previewFile for each
   - Preview shows parsed data
   - User clicks Import → calls importBatch
   - On success, show job ID and navigate to job view (placeholder for now)

3. Add toast notifications using shadcn/ui Toaster

## Verification

```bash
# Start dev server
npm run dev

# Manual testing:
# 1. Navigate to Import section
# 2. Select one or more .txt files
# 3. Click Preview - see parsed data in tables
# 4. Click Import - see success message with job ID
# 5. Verify job exists via API: curl http://127.0.0.1:8009/jobs
```

## Must-Haves

- [ ] File input accepts multiple .txt files
- [ ] Preview shows parsed data before import
- [ ] Import creates job and shows success feedback
- [ ] Errors display clearly (parse errors, API errors)
- [ ] Selected files can be removed before import

## Notes

- Browser file input provides File objects; need to read content and send to backend
- For Tauri mode, can later add native file dialog via @tauri-apps/api/dialog
- Keep workflow simple: select → preview → import
- Job list view is deferred to Phase 3 (Review Workflow)
